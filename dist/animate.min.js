!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ninepatchPlugin=e():t.ninepatchPlugin=e()}(window,function(){return function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(u){function t(t,e,n,r,o,i){void 0===i&&(i=!1);var a=u.call(this,t,e,n)||this;return a._animationJson=r,a._textureKey=o,a._loop=i,a._layers=[],a._animationJson.ANIMATION.TIMELINE.LAYERS.forEach(function(t){a._layers.push(new c(t))}),a._layers.reverse(),a._frames=Math.max.apply(Math,a._layers.map(function(t){return t.frames.length})),a._onNextFrame(),a._currentFrame=0,a._paused=!1,a}return o(t,u),t.prototype.update=function(){u.prototype.update.call(this),this._paused||this._onNextFrame()},t.prototype._onNextFrame=function(){var r=this;this._layers.forEach(function(t,e){var n=t.images;t.frames[r._currentFrame||0].elements.forEach(function(t){var e=n.get(t.key);e||((e=r._textureKey?r.game.add.image(0,0,r._textureKey,t.name):r.game.add.image(0,0,t.name)).anchor.setTo(.5),n.set(t.key,e),r.addChild(e)),e.position.setTo(t.position.x,t.position.y),e.scale.setTo(t.scaling.x,t.scaling.y),e.rotation=t.rotation,t.color&&(e.tint=t.color.tint,e.alpha=t.color.alpha)})}),this._currentFrame+=1,this._currentFrame===this._frames&&(this._currentFrame=0,this._loop||(this._paused=!0))},Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t},enumerable:!0,configurable:!0}),t}(Phaser.Sprite);e.ninepatch=i;var a,u,c=function(t){var e=this;this.images=new Map,this.frames=[],this.name=t.Layer_name,t.Frames.forEach(function(t){e.frames.push(new s(t))})},s=function(t){var e=this;this.elements=[],this.duration=t.duration,this.index=t.index,t.elements.forEach(function(t){e.elements.push(new l(t.SYMBOL_Instance))})},l=function(t){this.scaling={x:1,y:1},this.position=t.DecomposedMatrix.Position,this.rotation=t.DecomposedMatrix.Rotation.z,this.scaling.x=t.DecomposedMatrix.Scaling.x,this.scaling.y=t.DecomposedMatrix.Scaling.z,this.name=t.SYMBOL_name,this.key=t.SYMBOL_name+":"+t.Instance_Name,t.color&&(this.color=new p(t.color))},p=function(){function e(t){this._alpha=e.calculateAlpha(t),this._tint=e.calculateTint(t)}return Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},enumerable:!0,configurable:!0}),e.rgbToHex=function(t,e,n){return+("0x"+((1<<24)+(Math.round(t)<<16)+(Math.round(e)<<8)+Math.round(n)).toString(16).slice(1))},e.calculateAlpha=function(t){switch(t.mode){case a.Alpha:return t.alphaMultiplier;case a.Tint:return 1;default:return t.alphaMultiplier+t.AlphaOffset}},e.calculateTint=function(t){switch(t.mode){case a.Alpha:return e.rgbToHex(255,255,255);case a.Tint:return Number.parseInt(t.tintColor.replace("#","0x"))*t.tintMultiplier;default:return e.rgbToHex(255*t.RedMultiplier+t.redOffset,255*t.greenMultiplier+t.greenOffset,255*t.blueMultiplier+t.blueOffset)}},e}();(u=a||(a={})).Alpha="Alpha",u.Advanced="Advanced",u.Tint="Tint"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);e.ninepatch=r.ninepatch;var o=n(2);e.ninepatchPlugin=o.ninepatchPlugin},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var c=n(0),i=function(r){function t(t,e){var n=r.call(this,t,e)||this;return n._addParticleFactory(),n}return o(t,r),t.prototype._addParticleFactory=function(){var u=this;Phaser.GameObjectFactory.prototype.ninepatch=function(t,e,n,r,o,i){var a=new c.ninepatch(u.game,t,e,u._getData(n),r,o);return(i||u.game.world).add(a)},Phaser.GameObjectCreator.prototype.ninepatch=function(t,e,n,r,o){return new c.ninepatch(u.game,t,e,u._getData(n),r,o)}},t.prototype._getData=function(t){return"string"==typeof t?this.game.cache.getJSON(t):t},t}(Phaser.Plugin);e.ninepatchPlugin=i}])});